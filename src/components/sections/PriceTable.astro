<section class="price-table-section">
  <div class="container">
    <h2 class="fade-in-on-scroll">Tabel Harga Jasa Bore Pile Per Meter</h2>

    <!-- Desktop Table -->
    <div class="table-responsive desktop-view fade-in-on-scroll">
      <!-- Desktop table content remains the same -->
      <table class="price-table">
        <thead>
          <tr>
            <th>Diameter (Ø cm)</th>
            <th>Alat Berat Hydraulic</th>
            <th>Mini Crane</th>
            <th>Strauss Pile</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>30 cm</td><td><i class="fas fa-times"></i></td><td>Rp130.000 per meter¹</td><td>Rp85.000 per meter¹</td></tr>
          <tr><td>40 cm</td><td>Rp190.000 per meter¹</td><td>Rp150.000 per meter¹</td><td>Rp95.000 per meter¹</td></tr>
          <tr><td>50 cm</td><td>Rp280.000 per meter¹</td><td>Rp240.000 per meter¹</td><td><i class="fas fa-times"></i></td></tr>
          <tr><td>60 cm</td><td>Rp350.000 per meter¹</td><td>Rp280.000 per meter¹</td><td><i class="fas fa-times"></i></td></tr>
          <tr><td>80 cm</td><td>Rp450.000 per meter¹</td><td>Rp300.000 per meter¹</td><td><i class="fas fa-times"></i></td></tr>
          <tr><td>100 cm</td><td>Rp600.000 per meter¹</td><td><i class="fas fa-times"></i></td><td><i class="fas fa-times"></i></td></tr>
          <tr><td>150 cm</td><td>Rp1.200.000 per meter¹</td><td><i class="fas fa-times"></i></td><td><i class="fas fa-times"></i></td></tr>
        </tbody>
      </table>
    </div>

    <!-- Mobile Accordion -->
    <div class="mobile-view stagger-children">
      <div class="accordion">
        <div class="accordion-item"><button class="accordion-header"><span>Diameter 30 cm</span><i class="fas fa-chevron-down accordion-icon"></i></button><div class="accordion-body"><p><strong>Alat Berat Hydraulic:</strong> <i class="fas fa-times"></i></p><p><strong>Mini Crane:</strong> Rp130.000 per meter¹</p><p><strong>Strauss Pile:</strong> Rp85.000 per meter¹</p></div></div>
        <div class="accordion-item"><button class="accordion-header"><span>Diameter 40 cm</span><i class="fas fa-chevron-down accordion-icon"></i></button><div class="accordion-body"><p><strong>Alat Berat Hydraulic:</strong> Rp190.000 per meter¹</p><p><strong>Mini Crane:</strong> Rp150.000 per meter¹</p><p><strong>Strauss Pile:</strong> Rp95.000 per meter¹</p></div></div>
        <div class="accordion-item"><button class="accordion-header"><span>Diameter 50 cm</span><i class="fas fa-chevron-down accordion-icon"></i></button><div class="accordion-body"><p><strong>Alat Berat Hydraulic:</strong> Rp280.000 per meter¹</p><p><strong>Mini Crane:</strong> Rp240.000 per meter¹</p><p><strong>Strauss Pile:</strong> <i class="fas fa-times"></i></p></div></div>
        <div class="accordion-item"><button class="accordion-header"><span>Diameter 60 cm</span><i class="fas fa-chevron-down accordion-icon"></i></button><div class="accordion-body"><p><strong>Alat Berat Hydraulic:</strong> Rp350.000 per meter¹</p><p><strong>Mini Crane:</strong> Rp280.000 per meter¹</p><p><strong>Strauss Pile:</strong> <i class="fas fa-times"></i></p></div></div>
        <div class="accordion-item"><button class="accordion-header"><span>Diameter 80 cm</span><i class="fas fa-chevron-down accordion-icon"></i></button><div class="accordion-body"><p><strong>Alat Berat Hydraulic:</strong> Rp450.000 per meter¹</p><p><strong>Mini Crane:</strong> Rp300.000 per meter¹</p><p><strong>Strauss Pile:</strong> <i class="fas fa-times"></i></p></div></div>
        <div class="accordion-item"><button class="accordion-header"><span>Diameter 100 cm</span><i class="fas fa-chevron-down accordion-icon"></i></button><div class="accordion-body"><p><strong>Alat Berat Hydraulic:</strong> Rp600.000 per meter¹</p><p><strong>Mini Crane:</strong> <i class="fas fa-times"></i></p><p><strong>Strauss Pile:</strong> <i class="fas fa-times"></i></p></div></div>
        <div class="accordion-item"><button class="accordion-header"><span>Diameter 150 cm</span><i class="fas fa-chevron-down accordion-icon"></i></button><div class="accordion-body"><p><strong>Alat Berat Hydraulic:</strong> Rp1.200.000 per meter¹</p><p><strong>Mini Crane:</strong> <i class="fas fa-times"></i></p><p><strong>Strauss Pile:</strong> <i class="fas fa-times"></i></p></div></div>
      </div>
    </div>

    <p class="table-disclaimer fade-in-on-scroll">Dapatkan <strong>harga jasa bore pile</strong> yang transparan...</p>
  </div>
</section>

<style>
  /* General styles remain the same */
  .price-table-section { background-color: var(--background-color); }
  .table-responsive { width: 100%; overflow-x: auto; }
  .price-table { width: 100%; border-collapse: collapse; margin: 2rem 0; background-color: white; box-shadow: 0 5px 25px rgba(0, 0, 0, 0.05); border-radius: 12px; overflow: hidden; }
  .price-table th, .price-table td { padding: 1.25rem 1rem; text-align: left; border-bottom: 1px solid #e9ecef; white-space: nowrap; }
  .price-table th { background-color: var(--secondary-color); color: white; font-weight: 600; }
  .price-table td:first-child, .price-table th:first-child { font-weight: 700; color: var(--secondary-color); }
  .price-table .fa-times { color: #dc3545; font-size: 1.5rem; text-align: center; display: block; }
  .table-disclaimer { text-align: center; font-style: italic; color: #555; max-width: 800px; margin: 2rem auto 0 auto; }
  .desktop-view { display: block; } .mobile-view { display: none; }

  @media (max-width: 768px) {
    .desktop-view { display: none; }
    .mobile-view { display: block; }
    .accordion-item { border: 1px solid #ddd; border-radius: 8px; margin-bottom: 10px; overflow: hidden; background: #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
    .accordion-header { width: 100%; text-align: left; padding: 15px 20px; font-weight: 600; background: #f7f7f7; border: none; cursor: pointer; font-size: 1rem; color: var(--secondary-color); display: flex; justify-content: space-between; align-items: center; }
    .accordion-header:hover { background: #ececec; }
    .accordion-icon { transition: transform 0.3s ease-in-out; }
    .accordion-body { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-in-out, padding 0.4s ease-in-out; }
    .accordion-body p { padding: 0 20px; margin-bottom: 0; }
    .accordion-body p:last-child { padding-bottom: 0; }
    .accordion-body strong { color: var(--secondary-color); }
  }
</style>

<script is:inline>
  function setupPriceAccordion() {
    const accordionItems = document.querySelectorAll('.accordion-item');
    if (accordionItems.length === 0) return;

    accordionItems.forEach(item => {
      const header = item.querySelector('.accordion-header');
      const body = item.querySelector('.accordion-body');
      const icon = item.querySelector('.accordion-icon');
      if (!header || !body || !icon) return;

      // Initialize as closed
      body.style.maxHeight = null;
      body.style.padding = '0px';
      icon.style.transform = 'rotate(0deg)';

      header.addEventListener('click', () => {
        const isCurrentlyOpen = body.style.maxHeight !== '' && body.style.maxHeight !== '0px' && body.style.maxHeight !== null;

        // Close all items
        accordionItems.forEach(otherItem => {
          const otherBody = otherItem.querySelector('.accordion-body');
          const otherIcon = otherItem.querySelector('.accordion-icon');
          if (otherBody && otherIcon) {
            otherBody.style.maxHeight = null;
            otherBody.style.padding = '0px';
            otherIcon.style.transform = 'rotate(0deg)';
          }
        });

        // Toggle the clicked item
        if (!isCurrentlyOpen) {
          body.style.padding = '10px 20px 20px';
          body.style.maxHeight = body.scrollHeight + "px";
          icon.style.transform = 'rotate(180deg)';
        }
      });
    });
  }

  document.addEventListener('astro:page-load', setupPriceAccordion);
</script>